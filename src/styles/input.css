@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Modern UI Effects */
@import 'modern-ui.css';

/* Import Advanced Animations */
@import 'animations.css';

/* Base Typography Improvements */
@layer base {
  html {
    @apply scroll-smooth;
    font-feature-settings: 'cv11', 'ss01';
    font-variation-settings: 'opsz' 32;
  }
  
  body {
    @apply antialiased;
  }
  
  /* Improved focus styles */
  *:focus {
    outline: none;
  }
  
  *:focus-visible {
    @apply ring-2 ring-primary-500 ring-offset-2;
  }
}

/* Component Classes */
@layer components {
  /* Enhanced Markdown Styles with Typography Plugin - 2025 Update */
  .markdown-content {
    @apply prose prose-lg prose-gray max-w-none
           /* Headings with gradient effect */
           prose-headings:font-light 
           prose-h1:text-5xl prose-h1:font-extralight prose-h1:mb-10 prose-h1:tracking-tight
           prose-h1:bg-gradient-to-r prose-h1:from-gray-900 prose-h1:to-gray-600 
           prose-h1:bg-clip-text prose-h1:text-transparent
           prose-h2:text-3xl prose-h2:font-light prose-h2:mb-8 prose-h2:mt-16 
           prose-h2:relative prose-h2:pb-4
           prose-h3:text-2xl prose-h3:font-normal prose-h3:mb-6 prose-h3:mt-10
           prose-h3:text-gray-800
           prose-h4:text-xl prose-h4:font-medium prose-h4:mb-4 prose-h4:mt-8
           prose-h4:text-gray-700
           
           /* Enhanced paragraph styling */
           prose-p:text-gray-700 prose-p:leading-loose prose-p:mb-6
           prose-p:font-light
           
           /* Modern link styling */
           prose-a:text-primary-600 prose-a:font-medium prose-a:no-underline 
           prose-a:relative prose-a:transition-all
           hover:prose-a:text-primary-700
           
           /* Lists with custom markers */
           prose-ul:list-none prose-ul:ml-0 prose-ul:space-y-3
           prose-ol:list-none prose-ol:ml-0 prose-ol:space-y-3
           prose-li:text-gray-700 prose-li:leading-relaxed prose-li:relative prose-li:pl-8
           
           /* Modern blockquote */
           prose-blockquote:border-0 prose-blockquote:relative
           prose-blockquote:bg-gradient-to-r prose-blockquote:from-primary-50 prose-blockquote:to-secondary-50
           prose-blockquote:rounded-2xl prose-blockquote:not-italic 
           prose-blockquote:px-8 prose-blockquote:py-6 prose-blockquote:my-8
           prose-blockquote:shadow-sm
           
           /* Inline code styling */
           prose-code:bg-gradient-to-r prose-code:from-primary-100 prose-code:to-secondary-100
           prose-code:px-2 prose-code:py-1 prose-code:rounded-md prose-code:text-sm 
           prose-code:font-mono prose-code:font-medium
           prose-code:before:content-none prose-code:after:content-none
           
           /* Code blocks with glassmorphism */
           prose-pre:bg-gray-900/95 prose-pre:backdrop-blur-sm
           prose-pre:text-gray-100 prose-pre:rounded-2xl 
           prose-pre:border prose-pre:border-gray-700/50 
           prose-pre:shadow-2xl prose-pre:shadow-black/20
           
           /* Modern tables */
           prose-table:rounded-2xl prose-table:overflow-hidden prose-table:shadow-md
           prose-table:border prose-table:border-gray-200
           prose-th:bg-gradient-to-r prose-th:from-gray-50 prose-th:to-gray-100 
           prose-th:border-b prose-th:border-gray-200 
           prose-th:px-6 prose-th:py-4 prose-th:text-left prose-th:font-semibold
           prose-td:border-b prose-td:border-gray-100 prose-td:px-6 prose-td:py-4
           
           /* Images with hover effect */
           prose-img:rounded-2xl prose-img:shadow-xl prose-img:my-10 prose-img:mx-auto
           prose-img:transition-all prose-img:duration-300
           hover:prose-img:shadow-2xl hover:prose-img:scale-[1.02];
  }
  
  /* Custom list markers */
  .markdown-content ul > li::before {
    content: '';
    @apply absolute left-0 top-[0.6rem] w-2 h-2 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full;
  }
  
  .markdown-content ol {
    counter-reset: list-counter;
  }
  
  .markdown-content ol > li {
    counter-increment: list-counter;
  }
  
  .markdown-content ol > li::before {
    content: counter(list-counter);
    @apply absolute left-0 top-0 flex items-center justify-center w-6 h-6 
           bg-gradient-to-br from-primary-500 to-secondary-500 
           text-white text-xs font-bold rounded-full;
  }
  
  /* H2 underline effect */
  .markdown-content h2::after {
    content: '';
    @apply absolute bottom-0 left-0 w-20 h-1 
           bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full;
  }
  
  /* Link hover effect */
  .markdown-content a::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 
           bg-gradient-to-r from-primary-600 to-secondary-600 
           transition-all duration-300;
  }
  
  .markdown-content a:hover::after {
    @apply w-full;
  }
  
  /* Blockquote icon */
  .markdown-content blockquote::before {
    content: '"';
    @apply absolute -top-4 left-4 text-6xl text-primary-300 font-serif;
  }
  
  /* 代码块语法高亮 - 现代编辑器风格 */
  .markdown-content pre {
    @apply relative bg-[#0d1117] text-gray-100 p-6 rounded-2xl overflow-x-auto;
    tab-size: 2;
    box-shadow: 0 0 40px rgba(64, 192, 255, 0.1);
  }
  
  /* 代码块头部 */
  .markdown-content pre::before {
    content: '';
    @apply absolute top-4 left-6 flex gap-2;
    width: 60px;
    height: 12px;
    background: radial-gradient(circle, #ff5f57 6px, transparent 6px) 0 0 / 20px 20px no-repeat,
                radial-gradient(circle, #ffbd2e 6px, transparent 6px) 20px 0 / 20px 20px no-repeat,
                radial-gradient(circle, #28ca42 6px, transparent 6px) 40px 0 / 20px 20px no-repeat;
  }
  
  .markdown-content pre code {
    @apply bg-transparent p-0 text-sm leading-relaxed font-mono;
    text-shadow: 0 0 20px rgba(64, 192, 255, 0.3);
  }
  
  /* 内联代码样式 - 霓虹效果 */
  .markdown-content :not(pre) > code {
    @apply relative bg-gradient-to-r from-primary-100/90 to-secondary-100/90 
           text-primary-900 px-2 py-1 rounded-md text-sm font-mono font-medium
           border border-primary-200/50;
    text-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
  }
  
  /* Button Components */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 font-medium rounded-lg transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500;
  }
  
  .btn-secondary {
    @apply bg-secondary-600 text-white hover:bg-secondary-700 focus-visible:ring-secondary-500;
  }
  
  .btn-outline {
    @apply border-2 border-primary-600 text-primary-600 hover:bg-primary-50 focus-visible:ring-primary-500;
  }
  
  /* Card Components */
  .card {
    @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden;
  }
  
  .card-hover {
    @apply hover:shadow-lg hover:-translate-y-1 transition-all duration-200;
  }
  
  /* Gradient Text */
  .gradient-text {
    @apply bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent;
  }
  
  /* Loading States */
  .skeleton {
    @apply relative overflow-hidden bg-gray-200;
  }
  
  .skeleton::after {
    content: '';
    @apply absolute top-0 -left-full w-full h-full;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    animation: skeleton-loading 1.5s infinite;
  }
}

/* Utility Classes */
@layer utilities {
  /* Text Selection */
  .text-select-primary ::selection {
    @apply bg-primary-200 text-primary-900;
  }
  
  /* Smooth Scroll for Specific Elements */
  .smooth-scroll {
    scroll-behavior: smooth;
  }
  
  /* No Scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-400 rounded-full hover:bg-gray-500;
  }
  
  /* Gradient Backgrounds */
  .gradient-primary {
    @apply bg-gradient-to-r from-primary-500 to-secondary-500;
  }
  
  .gradient-aurora {
    background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c);
    background-size: 400% 400%;
    animation: aurora 15s ease infinite;
  }
  
  @keyframes aurora {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Hero Section Styles */
  .hero-bg {
    @apply relative;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    position: relative;
    overflow: hidden;
  }
  
  .hero-bg::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    bottom: -50%;
    left: -50%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 20px 20px;
    animation: backgroundScroll 60s linear infinite;
    opacity: 0.5;
  }
  
  .hero-bg::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 40% 20%, rgba(255, 219, 112, 0.2) 0%, transparent 50%);
    animation: floatAnimation 20s ease-in-out infinite;
  }
  
  @keyframes backgroundScroll {
    to {
      transform: translate(20px, 20px);
    }
  }
  
  @keyframes floatAnimation {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -30px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
  }
  
  /* Page Loader */
  .page-loader {
    @apply fixed inset-0 bg-white flex items-center justify-center z-50 transition-opacity duration-500;
  }
  
  .page-loader.hidden {
    @apply opacity-0 pointer-events-none;
  }
  
  .loader-icon {
    @apply w-12 h-12 border-[3px] border-gray-200 border-t-primary-500 rounded-full;
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
}

/* Motion Animations */
@layer utilities {
  /* Fade animations */
  .fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }
  
  .fade-in-up {
    @apply opacity-0 translate-y-4;
    animation: fadeInUp 0.5s ease-out forwards;
  }
  
  @keyframes fadeInUp {
    to {
      @apply opacity-100 translate-y-0;
    }
  }
  
  /* Scroll animations */
  .scroll-fade {
    @apply transition-all duration-700 ease-out;
  }
  
  .scroll-fade:not(.animated) {
    @apply opacity-0 translate-y-8;
  }
  
  .scroll-fade.visible,
  .scroll-fade.animated {
    @apply opacity-100 translate-y-0;
  }
  
  /* Interactive elements */
  .interactive {
    @apply transition-all duration-200 cursor-pointer;
  }
}

/* Print Styles */
@media print {
  .no-print {
    @apply hidden !important;
  }
  
  .glass-card {
    @apply bg-white border border-gray-300 shadow-none;
  }
}